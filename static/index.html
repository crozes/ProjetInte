		<!DOCTYPE html>
		<html lang="en">
		  <head>
		    <meta charset="utf-8">
		    <meta http-equiv="X-UA-Compatible" content="IE=edge">
		    <meta name="viewport" content="width=device-width, initial-scale=1">
		    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		    <title>Projet 2017</title>

		    <!-- Bootstrap -->
		    <!-- Latest compiled and minified CSS -->
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">

			<link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
			
			<link href="css/bootstrap-Meteo.css" rel="stylesheet">
		    <link href="css/weather-icons.css" rel="stylesheet">
		    <link href="css/bootstrap-Spinner.css" rel="stylesheet">
		    <link href="css/bootstrap-login.css" rel="stylesheet">
		    <link href="style.css" rel="stylesheet">

		  </head>
		  <body>
		  	<div id="backGris">
		  		<div class="container">
		    		<div class="row">
		        		<div class="col-md-offset-4 col-md-6">
		            		<div class="form-login">
		            			<h2>BIENVENUE</h2>
		            			<input type="text" id="pseudo" class="form-control input-sm chat-input" placeholder="Pseudo" />
		            			</br>
		            			
		            			<div class="wrapper">
		            				<span class="group-btn">     
		                				<button class="btn btn-primary btn-md" onclick="newPlayer()">Jouer <i class="fa fa-sign-in"></i></button>
		            				</span>
		            			</div>
		            		</div>
		        		</div>
		    		</div>
				</div>
		  	</div>

		    <div id="webPage" class="col-sm-12 container">
				<div class="row">
					<div id="meteo" class="col-sm-3">
						<div id="card" class="weater">
							<div class="city-selected">
								<article>

									<div class="info">
										<div class="city"><span>Jour :</span> <font id="numJourCourrant">1</font> / <font id="moment"></font></div>
										<div class="night" id="weather"></div>
										<div class="temp" id="hour"></div>

										<div class="wind">
											

											<span>ville: TOULOUSE</span>
										</div>
									</div>

									<div class="icon">
										<img 
											id="logoDay1"
		    								src="SVG/14.svg" 
		    								alt="weather"
		    								height="87px"
		    								width="80px" 
		    							/>
									</div>

								</article>
								
								<figure><img id="imageback" src="images/rainy.png" class="fontImage" /></figure>
							</div>

							<div class="days">
								<div id="prevision" class="row row-no-gutter">
									<div id="prev_1" class="col-md-4">
									</div>
									<div id="prev_2" class="col-md-4">
									</div>
									<div id="prev_3" class="col-md-4">
									</div>
									<div id="prev_4" class="col-md-4">
									</div>
									<div id="prev_5" class="col-md-4">
									</div>
									<div id="prev_6" class="col-md-4">
									</div>
									<div id="prev_7" class="col-md-4">
									</div>
									<div id="prev_8" class="col-md-4">
									</div>
									<div id="prev_9" class="col-md-4">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="onglet" class="col-sm-7">
						<div id="tabs">
		    				<div class="well">
		        				<ul class="nav nav-tabs">
		          					<li class="active"><a href="#Stats" data-toggle="tab" onclick="changePageSize(false)">Statistiques</a></li>
		          					<li><a href="#Story" data-toggle="tab" onclick="changePageSize(false)">Historique</a></li>
		          					<li><a href="#Map" data-toggle="tab" onclick="changePageSize(true)">Carte</a></li>
		          					<li><a href="#Actions" data-toggle="tab" onclick="changePageSize(false)">Actions</a></li>
		          					<li><a href="#Player" data-toggle="tab" onclick="changePageSize(false)">Joueur en partie</a></li>
		        				</ul>

		        				<div id="myTabContent" class="tab-content">
		          					<div class="tab-pane active in" id="Stats">
		            					<fieldset>
											<legend class="titre_tab">Toute les statistiques</legend>
										</fieldset>
		          					</div>
		          					<div class="tab-pane fade" id="Story">

		        						<h2>Achats réalisés</h2>
				        				<div id="historiqueAchat" class="col-sm-12">
		        						</div>

		        						<h2>Ventes réalisés</h2>
		        						<div id="historiqueVente" class="col-sm-12">
		        						</div>
		          					</div>
		          					<div class="tab-pane fade" id="Map">
		            					Carte du jeu :
		            					<div id="MapPlace">
		            						<canvas id="myCanvas" width="800" height="500" >
		            							<img id="mapBack" src="images/map.png" alt="map"> 
											</canvas>
											<h4>Legende :</h4>
											<p>Stand de limonade :<img id="stand" width="40" height="40"src="images/stand.png" alt="stand"></p>
											<p>Vos panneaux publicitaires :<img id="ad" width="40" height="40"src="images/pub.png" alt="pub"></p>
										</div>
		          					</div>
		          					<div class="tab-pane fade" id="Actions">
		            					<fieldset>

		            						<h2>Achat de panneaux publicitaire</h2>
		            						<div class="col-sm-12">
												<button type="button" id="add" onclick="addPanneau()" class="btn btn-info col-sm-12">Ajouter un panneaux</button>
		             							<table class="col-sm-12 tablePub">
		             								<thead>
		             									<tr>
		             										<td class="listTitre">
		             											Panneaux
		             										</td>
		             										<td class="listTitre">
		             											Coordonnées
		             										</td>
		             										<td class="listTitre">
		             											Range
		             										</td>
		             										<td class="listTitre">
		             											Prix
		             										</td>
		             										<td class="listTitre">
		             											
		             										</td>
		             									</tr>
		             								</thead>
		             								<tbody id="list">
		             								</tbody>
		             							</table>
											</div>
											<h2>Achat de cocktails</h2>
											<table class="table table-striped table-bordered" cellspacing="0" width="100%">
		    									<thead>
													<tr>
														<th>Cocktail</th>
														<th>Prix</th>
														<th>Alchool</th>
														<th>Frais</th>
														<th>Prix de vente</th>
														<th>Nombre à commander</th>
													</tr>
												</thead>

												<tbody id="AllProduct">
													
												</tbody>
											</table>
											<section>
												<button class="js-trigger-overlay" type="button" onclick="passerCommande()">Passer commande</button>
		  									</section>		
										</fieldset>
		          					</div>
		          					<div class="tab-pane fade" id="Player">
		           						<h2>Liste des joueur en partie et classement</h2>
		           						<div class="col-lg-12">
		           							<table class="col-lg-12">
		           								<thead>
		           									<tr>
		           										<th>Joueur</th>
		           										<th>Classement</th>                                        
		           									</tr>
		           								</thead>   
		           								<tbody id="classementJoueur">

		           								</tbody>
		           							</table>
							            </div>
							            <p>.</p>
		          					</div>
		        				</div>
		    				</div>
						</div>
					</div>
					<div id="evenement" class="col-sm-2">
						<h2>Récapitulatif</h2>
						<p>
							Pseudo :
							<font id="recapPseudo"></font>
						</p>
						<p>
							Jour :
							<font id="recapJour"></font>
						</p>
						<p>
							Meteo :
							<font id="recapMeteo"></font>
						</p>
						<p>
							Budget :
							<font id="recapBudget"></font>
						</p>
						<p>
							Ventes :
							<font id="recapVentes"></font>
						</p>
						<p>
							Profit :
							<font id="recapProfit"></font>
						</p>
						<h3>Achats</h3>
						<table  class="col-sm-12" id="recapTable">
							<thead class="theadTable">
								<tr class="col-sm-12">
									<td class="listTitre">Produit</td>
									<td class="listTitre">Prix</td>
								</tr>
							</thead>
							<tbody class="col-sm-12 tbodyTable" id="recapAchat">
							</tbody>
						</table>
						<font class="recapEnd">
						SOLDE: <font id="budgetTotal"></font> - <font id="achatTotal">0</font> = <font id="resultat"></font>€
						</font>
						
		            <section>
						<button class="js-trigger-overlay" type="button" onclick="passerCommande()">Passer commande</button>
		  			</section>	
					</div>
				</div>
			</div>

			<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>
			<script language="JavaScript" src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
			<script src="js/bootstrap-panneau.js"></script>
			<script src="js/bootstrap-produit.js"></script>


			<script type="text/javascript">

						var CurrentDay = 1;
						var CurrentDayPeriod = "AM";
						var doOnce = false;
						var pseudoJoueur = "";

						//var playerActionAd = {"kind": "ad", "location": [{"latitude": 0, "longitude": 0}], "radius": 0};
						//var playerActionDrinks = {"kind": "drinks", "prepare" : {"" : 0}, "price": {"", 0}};


						function newPlayer(){

							pseudoJoueur = $('#pseudo').val();
							var dataToSend = {'name': pseudoJoueur};

							//Post du nom de joueur sous la forme {'name': 'pseudo'}
							$.ajax("http://ponderosaproject.herokuapp.com/players",{
								type: 'POST',
								contentType: 'application/json',
								data: JSON.stringify(dataToSend),
								success: function (response) {

		                			$('#backGris').hide();

		                			var myName = response.name;

		                			//Modification du pseudo dans l'interface
									$('#recapPseudo').empty();
									$('#recapPseudo').append(myName);

									//set la position du joueur
									var position = response.location;
									//setPlayerPosition(position);

									var info = response.info;
		                			//Affiche les info de la journée
		                			setPlayerInfo(response.info);

		                			getAllInfoOnDayChange();
		        				}
							});
							setInterval(getHourWeather, 2000);
						}

						function getLatitude(data){

							var posString = JSON.stringify(data);
							var posParse = JSON.parse(posString);

							var latitude = posParse.latitude;
							
							return latitude;
						}

						function getLongitude(data){

							var posString = JSON.stringify(data);
							var posParse = JSON.parse(posString);

							var longitude = posParse.longitude;
							
							return longitude;
						}

						function setPlayerInfo(data){
							var infoString = JSON.stringify(data);
							var infoParse = JSON.parse(infoString);

							//Toutes mles donnée récupéré
							var argent = infoParse.cash;
							var ventes = infoParse.sales;
							var profit = infoParse.profit;
							var produits = infoParse.drinksOffered;

							$("#AllProduct").empty();

							for(var index2 in produits){
								var prodString = JSON.stringify(produits[index2]);
								var prodParse = JSON.parse(prodString);

								//set le tableau dans les actions 
								var nom = prodParse.name;
								var prix = prodParse.price;
								var alchool = prodParse.hasAlcohol;
								var cold = prodParse.isCold;

								//Ajout des produit a la table
								$("#AllProduct").append('<tr id="list_' + index2 + '"><td id="nomProd_' + index2 + '" class="col-sm-6">' + nom + '</td><td>' + prix + '€</td><td>' + alchool + '</td><td>' + cold + '</td><td><input id="prixVente_' + index2 + '" value="5" class="input" type="text" name="lname"></td><td class="col-sm-4"><div><div class="input-group number-spinner spinner"><span class="input-group-btn"><button onclick="prodMoins(' + index2 +')" id="prodMoins_' + index2 + '" class="btn btn-default buttonMoins" data-dir="dwn"><span class="glyphicon glyphicon-minus"></span></button></span><input id="inputProd_' + index2 + '" type="text" class="form-control text-center" value="0"><span class="input-group-btn"><button onclick="prodPlus(' + index2 +')" id="prodPlus_' + index2 + '" class="btn btn-default buttonPlus" data-dir="up"><span class="glyphicon glyphicon-plus"></span></button></span></div></div></td></tr>');
							}
							

							//Modificartion dans le recap
							$('#recapBudget').empty();
							$('#recapBudget').append(argent);
							$('#recapVentes').empty();
							$('#recapVentes').append(ventes);
							$('#recapProfit').empty();
							$('#recapProfit').append(profit);
						}


						function getHourWeather(){
							$.ajax('http://ponderosaproject.herokuapp.com/metrology').done(function(data){

								/*************RECUPERATION DES DONNEES ET STOCKAGE ***********/
								var madata = JSON.stringify(data);
								var maDataGet = JSON.parse(madata);

								var hour = maDataGet.timestamp;
								var temps = maDataGet.weather;
								/*************************************************************/

								//Appel de la fonction qui calcule le jour.
								dayCalculation(hour);

								var dayPeriod = CurrentDayPeriod;
								var dayPeriodChange;
								var dayPrev = CurrentDay;
								var dayPrevChange;

								//Boucle pour avoir chaque prévision de chaque jour suivant
								for(var index in temps){

									var value = JSON.stringify(temps[index]);
									var valueParse = JSON.parse(value);
									var indexMeteo = valueParse.dfn;
									var meteoTemps = valueParse.weather;

									//Test si l'index est a 0 puisque c'est la méteo d'aujourd'hui qui ne change pas
									switch(indexMeteo){
										case 0:
											$('#weather').empty();
											$('#weather').append(meteoTemps);
											$('#recapMeteo').empty();
											$('#recapMeteo').append(meteoTemps);

											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("logoDay1").src= "SVG/14.svg";
												document.getElementById("imageback").src = "images/cloudy.png";
												break;
											case 'rainny':
												document.getElementById("logoDay1").src= "SVG/18.svg";
												document.getElementById("imageback").src = "images/rainy.png";
												break;
											case 'sunny':
												document.getElementById("logoDay1").src= "SVG/8.svg";
												document.getElementById("imageback").src = "images/sunny.png";
												break;
											case 'heatwave':
												document.getElementById("logoDay1").src= "SVG/2.svg";
												document.getElementById("imageback").src = "images/heatwave.png";
												break;
											case 'thunderstorm':
												document.getElementById("logoDay1").src= "SVG/16.svg";
												document.getElementById("imageback").src = "images/thunderstorm.png";
												break;
											default:
												break;
											}
											break;
										case 1:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "PM";
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 1;
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 2:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 1;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 1;
												
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 3:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 1;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 2;
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 4:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 2;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 2;
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 5:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 2;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 3;
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 6:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 3;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 3;
												
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 7:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 3;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 4;
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 8:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 4;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 4;
												
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
										case 9:
											var dayPrevChange = dayPrev;
											if(dayPeriod == "AM"){
												dayPeriodChange = "PM";
												dayPrevChange = dayPrev + 4;
											}
											else if(dayPeriod == "PM"){
												dayPeriodChange = "AM";
												dayPrevChange = dayPrev + 5;
											}

											$('#prev_' + indexMeteo).empty();
											$('#prev_' + indexMeteo).append('<div class="day"><h1>JOUR ' + dayPrevChange + '</h1><h1>' + dayPeriodChange + '</h1><img id="imageMeteo_' + indexMeteo + '" src="" alt="prev1"height="87px"width="80px"/></div>');


											//Permet de changer les images de la prev
											switch(meteoTemps){
											case 'cloudy':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/14_2.svg";
												break;
											case 'rainny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/18_2.svg";
												break;
											case 'sunny':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/8_2.svg";
												break;
											case 'heatwave':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/2_2.svg";
												break;
											case 'thunderstorm':
											 	document.getElementById("imageMeteo_" + indexMeteo).src= "SVG/16_2.svg";
												break;
											default:
												break;
											}
											break;
									}
								}
							});
						}

						function dayCalculation(hour){

							//On recup le nombre de jour et on fait le modulo pour connaitre l'heure qui nous reste
							var nombreJour = hour / 24;
							var resModulo = hour % 24;

							//Change le jour
							if(nombreJour >= 1){
								CurrentDay = parseInt(nombreJour);
							}

							
							

							//Changement de jour sur l'affichage 
							$('#numJourCourrant').empty();
							$('#numJourCourrant').append(CurrentDay);

							$('#recapJour').empty();
							$('#recapJour').append(CurrentDay);

							//Changement d'heure sur l'affichage
							$('#hour').empty();
							$('#hour').append(resModulo + ': 00');

							//On change am ou pm selon l'heure
							if(resModulo > 12){
								CurrentDayPeriod = "PM";
								$('#moment').empty();
								$('#moment').append(CurrentDayPeriod);

							}
							else{
								CurrentDayPeriod = "AM";
								$('#moment').empty();
								$('#moment').append(CurrentDayPeriod);
							}
						}


						
						function passerCommande(){

							//recuêre le resultat des achats
							var resultat = $('#resultat').text();
							var resultatParse = parseInt(resultat);

							//Teste si le resultat des achats et positif sinon on ne peut pas acheter
							

							/* ********************************************************************************************************
							*On fais une bande dans l'historique pour stocker les données de commande pour pouvoir y acceder plus tard
							*/

							var pubString = '';
							var prodString;

							//Si cette valeur existe alors on a deja fais une commande ce jour ci donc il faut supr
							if($('#table_' + CurrentDay).length != 0){
								//On vide la table pour la re remplir
								$('#table_' + CurrentDay).remove();
							}


							//On crée le tableau hitorique du jour
							$('#historiqueAchat').append('<div id="table_' + CurrentDay + '" class="col-sm-6"><div class="well"><h4 class="text-warning">Jour <font id="historiqueJour_' + CurrentDay + '">' + CurrentDay +'</font></h4><p><span class="label label-success">PUB</span></p><table><thead><tr><td>Numéro de pub</td><td>Lat</td><td>long</td><td>Taille</td></tr></thead><tbody id="achatPub_' + CurrentDay + '"></tbody></table><p><span class="label label-success">PRODUITS</span></p><table><thead><tr><td>Nom produit</td><td>Nombre acheté</td><td>Prix de vente</td></tr></thead><tbody id="achatProd_' + CurrentDay + '"></tbody></table></div></div>');

							
							//On fait une boucle pour récupere toutes les pub et tous les produits
							for(var i = 0 ; i < 30 ; i++){

								
								//Teste si la ligne du panneau à cet index existe
								if($('#line_' + i).length != 0){

									//On récupere toutes les info de la ligne du panneau
									var longitude = $('#x_' + i).val();
									var latitude = $('#y_' + i).val();
									var surface = $('#surface_' + i).val();
									var prixPub = $('#tablePrixPub_' + i).text();
									var prixPubParse = parseInt(prixPub);

									$('#achatPub_' + CurrentDay).append('<tr><td id="achatPubNum_' + CurrentDay +'_' + i + '">' + i + '</td><td id="achatPubLat_' + CurrentDay +'_' + i + '">' + latitude+ '</td><td id="achatPubLong_' + CurrentDay +'_' + i + '">' + longitude + '</td><td id="achatPubSurf_' + CurrentDay +'_' + i + '">' + surface + '</td></tr>');
								}

								//Deuxieme test si il y en a des panneaux validés 2
								if($('#ValideLine_' + i).length != 0){

									//On récupere toutes les info de la ligne du panneau
									var ValLongitude = $('#ValPubLong_' + i).text();
									var ValLatitude = $('#ValPubLat_' + i).text();
									var ValSurface = $('#ValPubSurf_' + i).text();

									$('#achatPub_' + CurrentDay).append('<tr><td id="achatPubNum_' + CurrentDay +'_' + i + '">' + i + '</td><td id="achatPubLat_' + CurrentDay +'_' + i + '">' + ValLatitude + '</td><td id="achatPubLong_' + CurrentDay +'_' + i + '">' + ValLongitude + '</td><td id="achatPubSurf_' + CurrentDay +'_' + i + '">' + ValSurface + '</td></tr>');
								}

								//Test si on a commandé un produit
								if($('#list_' + i).length != 0){

									//Test si on a acheté au moins 1 boissons de ce produit
									if($('#inputProd_' + i).val() != 0){
										var nomProd = $('#nomProd_' + i).text();
										var prixDeVente = $('#prixVente_' + i).val();
										var nombreProd = $('#inputProd_' + i).val();

										$('#achatProd_' + CurrentDay).append('<tr><td id="achatProdNom_' + CurrentDay +'_' + i + '">' + nomProd + '</td><td id="achatProdNombre_' + CurrentDay +'_' + i + '">' + nombreProd + '</td><td id="achatProdPrix_' + CurrentDay +'_' + i + '">' + prixDeVente + '</td></tr>');
									}
									
								}

							}


							/* ********************************************************************************************************/

							//Creation des panneaux pour les rendre validé 
							for(var i = 0 ; i < 30 ; i++){

								//Teste si la ligne du panneau à cet index existe
								var x = $('#x_' + i).val();
								if(x){
									//On récupere toutes les info de la ligne du panneau
									var y = $('#y_' + i).val();
									var surface = $('#surface_' + i).val();
									var prixPub = $('#tablePrixPub_' + i).text();
									var prixPubParse = parseInt(prixPub);
									$('#list').append('<tr id="ValideLine_' + i + '"><td>Panneau <font id="ValPubNum_' + i +'">' + i + '</font></td><td>longitude:<font id="ValPubLong_' + i +'">' + x + '</font><BR>latitude:<font id="ValPubLat_' + i +'">' + y + '</font></td><td><font id="ValPubSurf_' + i +'">' + surface + '</font>m²</td><td>' + prixPub + '</td><td><button type="button" id="clear_' + i + '" onclick="deleteValidPanneau(' + i + ')" class="btn"><img id="logoDay1" src="SVG/trash.svg" alt="weather" height="50px" width="50px" /></button></td></tr>');

									//On supprime le panneaux qui a été renseigné 
									deletePanneau(i);
								}



								//On enleve les pub et prod du récapitulatif
								$('#line_' + i).remove();
								$('#pub_' + i).remove();
								$('#prod_' + i).remove();
								$('#inputProd_' + i).val(0);
							}


							//Pour pourvoir faire la fonction getActions()
							doOnce = false;

							//remet a jour le recapituatif d'achat
							modifSolde();
							

							//Envoie les données au server
							sendActionToServer();
						}

						function sendActionToServer(){

							var dataToSend = '{"actions" : [';

							//Boucle pour avoir les pub et les produits
							for(var i = 0; i < 30 ; i++){
								//Test si il y a un tableau crée aujourd'hui
								if($('#achatPub_' + CurrentDay).length != 0){
									//Test pour chaque ligne de pub 
									if($('#achatPubNum_' + CurrentDay + '_' + i).length != 0){
										var latitude = $('#achatPubLat_' + CurrentDay + '_' + i).text();
										var longitude = $('#achatPubLong_' + CurrentDay + '_' + i).text();
										var surface = $('#achatPubSurf_' + CurrentDay + '_' + i).text();

										dataToSend += '{"kind": "ad", "location": [{"latitude": ' + latitude + ', "longitude":' + longitude + '}], "radius": ' + surface + '}';
									}
								}

								//Test si il y a une tableau a ce jour
								if($('#achatProd_' + CurrentDay).length != 0){
									//Test si il y a une ligne a cet index
									if($('#achatProdNom_' + CurrentDay + '_' + i).length != 0){
										var nom = $('#achatProdNom_' + CurrentDay + '_' + i).text();
										var nombre = $('#achatProdNombre_' + CurrentDay + '_' + i).text();
										var prix = $('#achatProdPrix_' + CurrentDay + '_' + i).text();

										dataToSend += '{"kind": "drinks", "prepare" : {"' + nom + '" : ' + nombre + '}, "price": {"' + nom + '", ' + prix + '}}';
									}
								}
							}

							dataToSend += ']}';

							//Envoie des données au server
							$.ajax("http://ponderosaproject.herokuapp.com/actions/" + pseudoJoueur,{
								type: 'POST',
								contentType: 'application/json',
								data: JSON.stringify(dataToSend)
							});
						}

						//Appelé a chaque fois qu'on passe un jour 
						function getAllInfoOnDayChange(){
							$.ajax('http://ponderosaproject.herokuapp.com/map/' + pseudoJoueur).done(function(data){

								alert(JSON.stringify(data));
								/*************RECUPERATION DES DONNEES ET TRAITEMENT ***********/
								var madata = JSON.stringify(data);
								var maDataGet = JSON.parse(madata);

								//Changement des infos
								var info = maDataGet.playerInfo;
								setPlayerInfo(info);

								//Changement du ranking
								var map = maDataGet.map;
								setRanking(map);

								//Fais un update sur la map (remet a jour les positions etc)
								updateMap(map);

								/*************************************************************/
							});

						}

						function updateMap(map){
							//Canvas
							var canvas = document.getElementById("myCanvas");

							//Affichage de la map
							var imgBackGround =document.getElementById('mapBack');
    						var objetCanvasBack = canvas.getContext("2d");
							objetCanvasBack.drawImage(imgBackGround, 0, 0);

							//

   							/*************RECUPERATION DES DONNEES ET TRAITEMENT ***********/
   							var mapString = JSON.stringify(map);
							var mapParse = JSON.parse(mapString);
							var AllPlayerInfo = mapParse.itemsByPlayers;
							var infoItemsString = JSON.stringify(AllPlayerInfo);
							var infoItemsParse = JSON.parse(infoItemsString);
							//Toutes les personnes qui joue a la partie
							var allPlayer = setRanking(map);

							for(var index in allPlayer){
								var playerName = allPlayer[index];

								//Recuperation des info du player
								var infoPlayer = infoItemsParse[playerName];
								/*var infoPlayerString = JSON.stringify(infoPlayer);
								var infoPlayerParse = JSON.parse(infoPlayerString);
								alert(infoPlayerParse.kind);*/

								for(var index2 in infoPlayer){
									var infoPlayerString = infoPlayer[index2];
									var AllinfoPlayerString = JSON.stringify(infoPlayerString);
									var AllinfoPlayerParse = JSON.parse(AllinfoPlayerString);
									alert(AllinfoPlayerParse.kind);

									//A ce stade la nous sont dans les info d'un joueur
									//Nous avons acces a toutes les données du stand et des publicités
									if(AllinfoPlayerParse.kind == 'stand'){

										var latitude = getLatitude(AllinfoPlayerParse.location);
										var longitude = getLongitude(AllinfoPlayerParse.location);
										var objetCanvas = canvas.getContext("2d");
    									var img = new Image();
    									img.src = 'images/stand.png';
   										objetCanvas.drawImage(img, longitude, latitude);
									}
									else if(AllinfoPlayerParse.kind == 'ad'){

										var latitude = getLatitude(AllinfoPlayerParse.location);
										var longitude = getLongitude(AllinfoPlayerParse.location);
										var objetCanvas = canvas.getContext("2d");
    									var img = new Image();
    									img.src = 'images/pub.png';
   										objetCanvas.drawImage(img, longitude, latitude);
									}
								}
							}

							/*************************************************************/
						}


						//Appelé par : getAllInfoOnDayChange()
						function setRanking(map){

							var mapString = JSON.stringify(map);
							var mapParse = JSON.parse(mapString);
							var allRank = mapParse.ranking;
							
							//Vide le classement
							$('#classementJoueur').empty();

							//Boucle pour recuperer tous les joueur
							for(var index in allRank){
								var player = allRank[index];

								var num = parseInt(index) + 1;

								$('#classementJoueur').append('<tr><td>' + player + '</td><td><span class="label label-success">' + num + '</span></td></tr>');
							}

							return allRank;
						}

						function changePageSize(bool){
							if(bool){
   								$('#evenement').hide();
   								$("#onglet").attr('class', 'col-sm-9');
							}
							else{
								$('#evenement').show();
   								$("#onglet").attr('class', 'col-sm-7');
							}
						}

			</script>

		  </body>
		</html>